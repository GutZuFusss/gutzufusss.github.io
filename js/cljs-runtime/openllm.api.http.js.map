{"version":3,"sources":["openllm/api/http.cljs"],"mappings":";AAIA,gCAAA,hCAAKA;AAML;;;2BAAA,3BAAOC,8DAEJC;AAFH,AAGE,QAAKF,0EAAaE;;AAMpB,yDAAA,kGAAA,3JAACC,4LAGA,aAAAC,FAAKU;AAAL,AAAA,IAAAT,aAAAD;IAAAE,aAAA,AAAAC,cAAAF;IAAAG,eAAA,AAAAC,gBAAAH;IAAAA,iBAAA,AAAAI,eAAAJ;YAAAE,RAAQM;IAARN,mBAAA,AAAAC,gBAAAH;IAAAA,iBAAA,AAAAI,eAAAJ;aAAAE,TAAUO;IAAVP,mBAAA,AAAAC,gBAAAH;IAAAA,iBAAA,AAAAI,eAAAJ;iBAAAE,bAAiBQ;IAAjBL,aAAAL;IAAAK,iBAAA,AAAAC,4BAAAD;iBAAA,AAAAE,4CAAAF,eAAA,xEAAsCM;iBAAtC,AAAAJ,4CAAAF,eAAA,xEAAiDO;AAAjD,AAAA,kDAAA,iEAAA,2CAAA,uDAAA,oDAAA,4FAAA,wDAAA,2CAAA,+DAAA,oFAAA,0FAAA,iOAAA,4EAAA,tqBAEiC,yBAAA,zBAACjB,oMACQc,wEACIC,6EACb,AAACG,2GACD,+BAAA,2CAAA,8DAAA,xIAACC,uNACDH,2EACAC;;AAElC,yDAAA,kGAAA,3JAACf,4LAGA,aAAAkB,FAAKP;AAAL,AAAA,IAAAQ,aAAAD;YAAA,AAAAE,4CAAAD,WAAA,IAAA,nEAAQR;WAAR,AAAAS,4CAAAD,WAAA,IAAA,lEAAUG;IAAVD,aAAA,AAAAD,4CAAAD,WAAA,IAAA;IAAAE,iBAAA,AAAAZ,4BAAAY;iBAAA,AAAAX,4CAAAW,eAAA,xEAAuBP;iBAAvB,AAAAJ,4CAAAW,eAAA,xEAAkCN;AAAlC,AAAA,kDAAA,iEAAA,2CAAA,uDAAA,oDAAA,4FAAA,6DAAA,mOAAA,uPAAA,4EAAA,5oBAEiC,yBAAA,zBAACjB,iGACAwB,+DACD,CAACC,8DAAAA,gEAAAA,qHACD,CAACC,+DAAAA,iEAAAA,4GACDV,2EACAC","names":["openllm.api.http/api-base-url","openllm.api.http/get-uri","endpoint","re_frame.core.reg_event_fx","p__39940","vec__39941","seq__39942","cljs.core/seq","first__39943","cljs.core/first","cljs.core/next","map__39944","cljs.core/--destructure-map","cljs.core.get","_","prompt","llm-config","on-success","on-failure","ajax.core/json-request-format","ajax.core/json-response-format","p__39945","vec__39946","cljs.core.nth","map__39949","json","ajax.core/text-request-format","ajax.core/text-response-format"],"sourcesContent":["(ns openllm.api.http\n  (:require [ajax.core :as ajax]\n            [re-frame.core :refer [reg-event-fx]]))\n\n(def api-base-url \"http://localhost:3000\")\n\n\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n;;              Functions             ;;\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n(defn- get-uri\n  \"Returns the URI for the given endpoint.\"\n  [endpoint]\n  (str api-base-url endpoint))\n\n\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n;;               Events               ;;\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n(reg-event-fx\n ::v1-generate\n []\n (fn [_ [_ prompt llm-config & {:keys [on-success on-failure]}]]\n   {:http-xhrio {:method          :post\n                 :uri             (get-uri \"/v1/generate\")\n                 :params          {:prompt prompt\n                                   :llm_config llm-config}\n                 :format          (ajax/json-request-format)\n                 :response-format (ajax/json-response-format {:keywords? true})\n                 :on-success      on-success\n                 :on-failure      on-failure}}))\n\n(reg-event-fx\n ::v1-metadata\n []\n (fn [_ [_ json {:keys [on-success on-failure]}]]\n   {:http-xhrio {:method          :post\n                 :uri             (get-uri \"/v1/metadata\")\n                 :params           json\n                 :format          (ajax/text-request-format)\n                 :response-format (ajax/text-response-format)\n                 :on-success      on-success\n                 :on-failure      on-failure}}))\n"]}