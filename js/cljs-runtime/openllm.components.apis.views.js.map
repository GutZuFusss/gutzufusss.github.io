{"version":3,"sources":["openllm/components/apis/views.cljs"],"mappings":";;AAYA,oCAAA,pCAACA,2CAA4BC;AAa7B;;;gDAAA,hDAAMC,wGAEHC;AAFH,AAGE,IAAMC,eAAa,sDAAA,mFAAA,zIAACC;AAApB,AAAA,0FACG;AAAA,AAAA,0FAAA,mDAAA,2CAAA,wDAAA,eAAA,mFAAA,yDAAA,2CAAA,mcAAA,6DAAA,xcAEoB,CAAA,4EACK,8KAAA,oCAAA,hNAAI,6CAAA,AAAAC,7CAACC,6DAAGH,cAAa,AAAA,gFAAKD;AAHnD,AAMwB,8BAAA,mFAAA,1GAACK,mPAAuC,AAAA,gFAAKL;WACjE,4CAAK,AAAA,mFAAOA;;;AAErB;;;+CAAA,/CAAMM;AAAN,AAGE,oDAAA,mFAAA,hIAACC,2LACK,AAACC,4CAAIT,8CAAgBU;;AAE7B;;;oDAAA,pDAAME,gHAEHV,aAAaW;AAFhB,AAAA,0FAAA,6DAAA,2CAAA,wDAAA,wCAAA,4DAAA,+DAAA,WAAAF,hFAIqBE;AAJrB,AAK0B,8BAAA,mFAAA,1GAACP,iPAAsCJ,aAAa,AAAA,AAAAS;;;AAE9E;;;;qDAAA,rDAAMG,kHAGHZ,aAAaW;AAHhB,AAAA,0FAAA,mDAAA,2CAAA,wDAAA,2BAAA,QAAA,mFAAA,mDAAA,2CAAA,wDAAA,gCAAA,sHAAA,2CAAA,qDAAA,SAAA,2DAAA,WAAA,6DAAA,/QAOKE;AAPL,AASwB,8BAAA,mFAAA,oJAAA,9PAACT,iPAAsCJ;WAT/D,gBAAA,mFAAA,mDAAA,2CAAA,wDAAA,eAAA,sHAAA,2CAAA,qDAAA,SAAA,2DAAA,WAAA,0OAAA,6DAAA,zfAWMa,8QAEkB,sDAAA,tDAACC,yIAAcC;AAbvC,AAcyB,8BAAA,mFAAA,1GAACX,wPAA2CJ,aAAaW;WAdlF;;AAgBA;;;;4CAAA,5CAAMK;AAAN,AAIE,IAAMC,eAAa,sDAAA,mFAAA,zIAAChB;AAApB,AACE;AAAA,AAAA,0FAAA,mDAAA,4HAAA,WAAA,YAAA,+GAAA,2CAAA,8DAAA,eAAA,AAAAC,vSAEIgB,mJACAC,oKAAiCF;;;AAEzC;;;0DAAA,1DAAMG;AAAN,AAGE,IAAMpB,eAAa,sDAAA,mFAAA,zIAACC;IACdoB,cAAY,sDAAA,mFAAA,zIAACpB;AADnB,AAEE;AAAA,AAAA,0FAAA,mDAAA,2CAAA,wDAAA,oBAAA,4HAAA,UAAA,YAAA,qIAAA,AAAAC,8BAAA,AAAAA,qCAAA,sIAAA,AAAAA,8BAAA,AAAAA,qCAAA,hdAEIgB,kJACAR,kEAAqBV,8BAAcqB,wGACnCT,mEAAsBZ,8BAAcqB,wGACpCL;;;AAER;;;kDAAA,lDAAMM;AAAN,AAAA,0FAAA,mDAAA,2CAAA,wDAAA,2CAAA,mFAAA,mDAAA,2CAAA,wDAAA,sDAAA,mFAAA,mDAAA,2CAAA,wDAAA,qBAAA,4HAAA,WAAA,YAAA,mFAAA,iDAAA,2CAAA,wDAAA,uCAAA,gJAAA,mFAAA,mDAAA,2CAAA,wDAAA,oFAAA,4HAAA,OAAA,YAAA,mFAAA,iDAAA,2CAAA,wDAAA,8CAAA,/rCAMMJ,iaAEAb,6cAEAa,oaAEAE","names":["re-highlight.core/register-language","js/module$node_modules$highlight_DOT_js$lib$languages$json","openllm.components.apis.views/single-endpoint","endpoint-data","selected-api","re_frame.core.subscribe","cljs.core/deref","cljs.core._EQ_","re-frame.core/dispatch","openllm.components.apis.views/endpoints-list","cljs.core.into","cljs.core.map","openllm.components.apis.data/endpoints-data","p1__28870#","openllm.components.apis.views/request-input-field","value","openllm.components.apis.views/input-field-controls","reagent-mui.material.button/button","reagent.core.as_element","reagent-mui.icons.send/send","openllm.components.apis.views/result-area","last-message","openllm.components.common.views/headline","re-highlight.core/highlight","openllm.components.apis.views/endpoint-request-response","input-value","openllm.components.apis.views/apis-tab-contents"],"sourcesContent":["(ns openllm.components.apis.views\n  (:require [openllm.components.apis.events :as events]\n            [openllm.components.apis.subs :as subs]\n            [openllm.components.apis.data :as data]\n            [openllm.components.common.views :as ui]\n            [re-highlight.core :as hl]\n            [re-frame.core :as rf]\n            [reagent-mui.material.button :refer [button]]\n            [reagent-mui.icons.send :as send-icon]\n            [reagent.core :as r]\n            [\"highlight.js/lib/languages/json\" :as json]))\n\n(hl/register-language \"json\" json)\n\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n;;                                                                             ;;\n;;                             IMPORTANT NOTE                                  ;;\n;;                                                                             ;;\n;;    Idially, to add new endpoint you need to add it to endpoints data and    ;;\n;;    you never have to modify the code below this note!                       ;;\n;;    Please refer to the openllm.components.apis.data namespace to find       ;;\n;;    said data.                                                                ;;\n;;                                                                             ;;\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n\n(defn single-endpoint\n  \"A single endpoint in the list of endpoints.\"\n  [endpoint-data]\n  (let [selected-api (rf/subscribe [::subs/selected-api])]\n    [(fn []\n       [:div {:class \"mt-2\"}\n        [:button {:class (str \"rounded-l-md w-full py-2 px-2 text-left text-sm font-medium text-gray-700\"\n                              (if (= @selected-api (:id endpoint-data))\n                                \" bg-gray-700 text-white font-bold\"\n                                \" bg-gray-200 hover:bg-gray-100 hover:text-gray-900  border-t border-l border-b border-gray-300\"))\n                  :on-click #(rf/dispatch [::events/set-selected-api (:id endpoint-data)])}\n         (str (:name endpoint-data))]])]))\n\n(defn endpoints-list\n  \"The list on the left containing all the endpoints available.\"\n  []\n  (into [:div]\n        (map single-endpoint data/endpoints-data)))\n\n(defn request-input-field\n  \"The input field for the data to send to the backend.\"\n  [selected-api value]\n  [:textarea {:class \"pt-3 mt-1 font-mono w-full h-64 block\"\n              :value value\n              :on-change #(rf/dispatch [::events/set-input-value selected-api (.. % -target -value)])}])\n\n(defn input-field-controls\n  \"Control buttons for the input field, where the user enters his/her\n   request body.\"\n  [selected-api value]\n  [:div {:class \"grid grid-cols-2\"}\n   \"maybe\"\n   [:div {:class \"mt-3 flex justify-end\"}\n    [button {:type \"button\"\n             :variant \"outlined\"\n             :on-click #(rf/dispatch [::events/set-input-value selected-api \"\"])} \"Clear\"]\n    [:div {:class \"ml-2\"}\n     [button {:type \"button\"\n              :variant \"outlined\"\n              :end-icon (r/as-element [send-icon/send])\n              :on-click #(rf/dispatch [::events/on-send-button-click selected-api value])} \"Send\"]]]])\n\n(defn result-area\n  \"The latest response retrieved from the backend will be displayed in\n   this component.\"\n  []\n  (let [last-message (rf/subscribe [::subs/response-message])]\n    (fn []\n      [:div\n       [ui/headline \"Response\" 0]\n       [hl/highlight {:language \"json\"} @last-message]])))\n\n(defn endpoint-request-response\n  \"The request and response area of the selected endpoint.\"\n  []\n  (let [selected-api (rf/subscribe [::subs/selected-api])\n        input-value (rf/subscribe [::subs/input-value])]\n    (fn []\n      [:div {:class \"mt-2 ml-2\"}\n       [ui/headline \"Request\" 0]\n       [request-input-field @selected-api @input-value]\n       [input-field-controls @selected-api @input-value]\n       [result-area]])))\n\n(defn apis-tab-contents\n  \"The contents of the APIs tab.\"\n  []\n  [:div {:class \"mt-6 px-4 h-[calc(100%-14.5rem)]\"}\n   [:div {:class \"mt-6 grid-container grid grid-cols-4 h-full\"} ;; 4 cols: div 1 will span 1 col, the other one 3\n    [:div {:class \"col-span-1\"}\n     [ui/headline \"Endpoint\" 6]\n     [:hr {:class \"border-gray-200 mt-1\"}]\n     [endpoints-list]]\n    [:div {:class \"col-span-3 border-l border-gray-200 h-full overflow-y-scroll no-scrollbar\"}\n     [ui/headline \"Data\" 6]\n     [:hr {:class \"border-gray-200 mt-1 w-fill\"}]\n     [endpoint-request-response]]]])\n"]}