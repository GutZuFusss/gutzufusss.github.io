{"version":3,"sources":["openllm/api/components.cljs"],"mappings":";AAMA;;;4CAAA,oDAAAA,hGAAMI;AAAN,AAAA,IAAAH,aAAAD;IAAAC,iBAAA,AAAAC,4BAAAD;qBAAA,AAAAE,4CAAAF,eAAA,5EAEWI;AAFX,AAGE,IAAMC,cAAY,KAAAC;AAAlB,AACE,+DAAA,2CAAA,nGAACC,uLAEC,WAAKC;AAAL,AACE,oCAAA,7BAAmBH,oCACA,WAAKI;AAAL,AACE,IAAMC,UAAQ,AAAA,AAAID;AAAlB,AACE,8BAAA,vBAACE,0GAAaP,eAAeM;;GANxD,0DAQE;AAAA,AAAA,0FAAA,iDAAA,mFAAA,sDAAA,2CAAA,qDAAA,OAAA,uDAAA,2CAAA,0DAAA,eAAA,kDAAA,cAAA,+DAKuB,WAAKD;AAAL,AACE,IAAMG,QAASH,DAAqB,CAAA,AAAA,iBAAA;AAApC,AACE,OAAaJ,uBAAYO;mBAPpD,gIAAA,2CAAA,6DAAA,rJAQIC;AARJ,AAQ4B,OAAI,uBAAA,vBAAgBC;GARhD,uDAAA,kBAWI,sDAAA,tDAACC,yIAAcC","names":["p__40209","map__40210","cljs.core/--destructure-map","cljs.core.get","openllm.api.components/file-upload-button","callback-event","file-reader","js/FileReader","reagent.core.create_class","_","evt","content","re-frame.core/dispatch","file","reagent-mui.material.icon-button/icon-button","js/document","reagent.core.as_element","reagent-mui.icons.file-upload/file-upload"],"sourcesContent":["(ns openllm.api.components\n  (:require [reagent-mui.icons.file-upload :refer [file-upload]]\n            [reagent-mui.material.icon-button :refer [icon-button]]\n            [re-frame.core :as rf]\n            [reagent.core :as r]))\n\n(defn file-upload-button\n  \"The file upload reagent custom component.\"\n  [{:keys [callback-event]}]\n  (let [file-reader (js/FileReader.)]\n    (r/create-class\n     {:component-did-mount\n      (fn [_]\n        (.addEventListener file-reader \"load\"\n                           (fn [evt]\n                             (let [content (-> evt .-target .-result)]\n                               (rf/dispatch [callback-event content])))))\n      :render\n      (fn []\n        [:<>\n         [:input {:type \"file\"\n                  :style {:display \"none\"}\n                  :id \"file-upload\"\n                  :on-change (fn [evt]\n                               (let [file (-> evt .-target .-files (aget 0))]\n                                 (.readAsText file-reader file)))}]\n         [icon-button {:on-click #(-> (.querySelector js/document \"#file-upload\")\n                                      .click)\n                       :color \"primary\"}\n          (r/as-element [file-upload])]])})))\n"]}